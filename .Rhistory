# clear environment
rm(list=ls())
# set working directory
setwd("~/Documents/GitHub/TidyTuesday/TidyTuesday")
# load packages
list.packages <- c("tidyverse","tidytuesdayR", "ggplot2", "dplyr", "patchwork")
for(i in list.packages) {
if(!require(i , character.only = TRUE)) install.packages(i)
library(i, character.only = TRUE)
}
rm(list.packages, i)
## load tt-data
tuesdata <- tidytuesdayR::tt_load('2021-01-18')
starbucks <- tuesdata$starbucks
tuesdata <- tidytuesdayR::tt_load('2021-01-18')
## load tt-data
tuesdata <- tidytuesdayR::tt_load('2022-01-18')
chocolate <- tuesdata$chocolate
View(chocolate)
View(chocolate)
chocolate$cocoa_percent_num <- sapply(chocolate$cocoa_percent, function(x) gsub("%", "", x))
View(chocolate)
# manipulate data
chocolate$cocoa_percent_num <- as.numeric(sapply(chocolate$cocoa_percent, function(x) gsub("%", "", x)))
# aggregate by data
chocolate_year < chocolate %>%
group_by(review_date) %>%
summarize(mean = mean(cocoa_percent_num))
# aggregate by data
chocolate_year <_ chocolate %>%
group_by(review_date) %>%
summarize(mean = mean(cocoa_percent_num))
# aggregate by data
chocolate_year <- chocolate %>%
group_by(review_date) %>%
summarize(mean = mean(cocoa_percent_num))
View(chocolate_year)
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Living longer",
subtitle = "Life expectancy in Malawi 1952-2007")
# load packages
devtools::install_github('bbc/bbplot')
list.packages <- c("tidyverse","tidytuesdayR", "ggplot2", "dplyr", "patchwork","devtools")
for(i in list.packages) {
if(!require(i , character.only = TRUE)) install.packages(i)
library(i, character.only = TRUE)
}
devtools::install_github('bbc/bbplot')
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Living longer",
subtitle = "Life expectancy in Malawi 1952-2007")
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Living longer",
subtitle = "Life expectancy in Malawi 1952-2007")
?bbc_style
devtools::install_github('bbc/bbplot')
library(bbplot)
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Living longer",
subtitle = "Life expectancy in Malawi 1952-2007")
chocolate_year <- chocolate %>%
group_by(review_date) %>%
summarize(mean = mean(rating))
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Living longer",
subtitle = "Life expectancy in Malawi 1952-2007")
ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5")
View(chocolate_year)
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5")
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = -0.2,
size=0.5)
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5)
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 1980, y = 45, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6)
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6)
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5",
caption = "Contribution to TidyTuesday (Week3 2022) by Thomas Mock \n Data-Source: http://flavorsofcacao.com/chocolate_database.html \n Style: https://bbc.github.io/rcookbook/")
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5",
caption = "Contribution to TidyTuesday (Week3 2022) by Thomas Mock \n Data-Source: http://flavorsofcacao.com/chocolate_database.html \n Style: https://bbc.github.io/rcookbook")
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6)
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style() +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5",
caption = "Contribution to TidyTuesday (Week3 2022) by Thomas Mock \n Data-Source: http://flavorsofcacao.com/chocolate_database.html \n Style: https://bbc.github.io/rcookbook")
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6)
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style()
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5",
caption = "Contribution to TidyTuesday (Week3 2022) by Thomas Mock \n Data-Source: http://flavorsofcacao.com/chocolate_database.html \n Style: https://bbc.github.io/rcookbook")
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style()
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="Choclate ratings over time",
subtitle = "Rating between 0 and 5",
caption = "Contribution to TidyTuesday (Week3 2022) by Thomas Mock \n
Data-Source: http://flavorsofcacao.com/chocolate_database.html \n
Style: https://bbc.github.io/rcookbook")
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="TidyTuesday contribution week 3 in 2022 (BBC style graphics)",
subtitle = "Choclate ratings over time")
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "Lowest choclate rating"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="TidyTuesday contribution week 3 in 2022 ",
subtitle = "Choclate ratings over time (BBC style graphics)")
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style()
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "lowest position in the ranking"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="TidyTuesday contribution week 3 in 2022 ",
subtitle = "Choclate ratings over time (BBC style graphics)")
ggsave("991_TidyTuesday2022Week3.png")
getwd()
setwd("~/Documents/GitHub/TidyTuesday")
## tidy tuesday week 3 (2022) - Choclate Bar rating
# clear environment
rm(list=ls())
# set working directory
setwd("~/Documents/GitHub/TidyTuesday/TidyTuesday")
# load packages
list.packages <- c("tidyverse","tidytuesdayR", "ggplot2", "dplyr", "patchwork","devtools", "bbplot")
for(i in list.packages) {
if(!require(i , character.only = TRUE)) install.packages(i)
library(i, character.only = TRUE)
}
devtools::install_github('bbc/bbplot')
rm(list.packages, i)
## load tt-data
tuesdata <- tidytuesdayR::tt_load('2022-01-18')
chocolate <- tuesdata$chocolate
# manipulate data
# change percentage to numeric (source code command from https://www.kaggle.com/willcanniford/chocolate-bar-ratings-extensive-eda)
chocolate$cocoa_percent_num <- as.numeric(sapply(chocolate$cocoa_percent, function(x) gsub("%", "", x)))
# aggregate by data
chocolate_year <- chocolate %>%
group_by(review_date) %>%
summarize(mean = mean(rating))
# plot graph in BBC style https://bbc.github.io/rcookbook/
plot1 <- ggplot(chocolate_year, aes(review_date, mean)) +
geom_line(colour = "#1380A1", size = 1) +
geom_hline(yintercept = 0, size = 1, colour="#333333") +
bbc_style()
plot1 + geom_curve(aes(x = 2008, y = 2.9, xend = 2012, yend = 2.4),
colour = "#555555",
curvature = 0.2,
size=0.5) +
geom_label(aes(x = 2012, y = 2.4, label = "lowest position in the ranking"),
hjust = 0,
vjust = 0.5,
colour = "#555555",
fill = "white",
label.size = NA,
family="Helvetica",
size = 6) +
labs(title="TidyTuesday contribution week 3 in 2022 ",
subtitle = "Choclate ratings over time (BBC style graphics)")
## save png
ggsave("~/Documents/GitHub/TidyTuesday/991_TidyTuesday2022Week3.png")
